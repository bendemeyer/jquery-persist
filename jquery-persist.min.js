(function(e){e.fn.extend({persist:function(t,n,r,i){var s=this;if(e.fn.on){this.on(t,n,r,i)}else if(e.fn.delegate){this.delegate(n,t,r,i)}else{if(!e.cache){e.cache={}}if(!e.cache.persist){e.cache.persist=[]}var o={};o.active=true;o.elem=this;o.event=t;o.select=n;o.handler=i||r;e.cache.persist[e.cache.persist.length]=o;i=i||r;r=i==r?null:r;if(e.macros){this.bind(t,function(e){u(e,this,r)})}else{this.bind(t,r,function(e){u(e,this)})}function u(r,o,u){if(u){r.data=u}var a=true;for(var f=0;f<e.cache.persist.length;f++){if(e.cache.persist[f].elem.index(o)!=-1&&(e.cache.persist[f].event==t||!e.cache.persist[f].event)&&(e.cache.persist[f].select==n||!e.cache.persist[f].select)&&(e.cache.persist[f].handler==i||!e.cache.persist[f].handler)){a=e.cache.persist[f].active}}if(a){var l=r.target;if(e(l).is(n)&&s.find(l)){i(r)}else{while(l=l.parentElement&&s.find(l)){if(e(l).is(n)){i(r);break}}}}}}},unpersist:function(t,n,r){if(e.fn.off){this.off(t,n,r)}else if(e.fn.undelegate){if(!arguments.length){this.undelegate()}else{this.undelegate(n,t,r)}}else{if(!e.cache){e.cache={}}if(!e.cache.persist){e.cache.persist=[]}var i={};i.active=false;i.elem=this;i.event=t;i.select=n;i.handler=r;e.cache.persist[e.cache.persist.length]=i}}})})(jQuery)